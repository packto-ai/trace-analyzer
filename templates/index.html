<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>packto.ai</title>
    <script src="/static/scripts.js" defer></script>
    <link rel="stylesheet" href="/static/styles/index_styles.css">
</head>
<body>

    <div class="page-container">
        <div class="sidebar" id="sidebar">
            <button class="toggle-btn" onclick="toggleSidebar()">â˜°</button>
            <div class="groups_container">
                <h2>Packet Trace Groups</h2>
                <form action="/add_group" method="get">
                    <button type="submit">Add New Group</button>
                    <br />
                    <br />
                </form>
                <ul id="itemList">
                    {% for item in groups %}
                    <li class="item-container">
                        <span>{{ item.group }}</span>
                        <button onclick="runAnalysis('{{ item.group_id }}', '{{ llm }}')">Analyze</button>
                        <button onclick="editGroup('{{ item.group_id }}')">Edit</button>
                        <button onclick="deleteGroup('{{ item.group_id }}')">Delete</button>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="chat-container">
            <!-- <div class="logo-container">
                <a href="/">
                    <img src="/static/images/PACKTO_BANNER.png" alt="Logo" class="logo">
                </a>
            </div> -->

            <div class="chat-sections">
                <div class="initial_analysis">
                    <h3>Initial Analysis</h3>
                    <p>{{ init_qa | safe }}</p>
                </div>
        
                <div class="chat_history">
                    <h3>Chat History</h3>
                    <p>{{ chat_history | safe }}</p>
                </div>
        
                <div class="current_chat">
                    <h3>Current Chat</h3>
                    <p>{{ current_chat | safe }}</p>
                </div>
            </div>

            <div class="chat-input">
                <form action="/chat_bot?group_id={{ group_id }}" method="post">
                    <input 
                        type="text" 
                        name="user_input" 
                        placeholder="{{ 'Must Select Group and LLM to Use' if group_id is none else 'Type your message here...' }}" 
                        {% if group_id is none %}disabled{% endif %}>
                    <button type="submit" {% if group_id is none %}disabled{% endif %}>
                        Send
                    </button>
                </form>
            </div>
        </div>
    </div>

    <div id="loading-indicator" class="loading-spinner" style="display: none;">
        <p>Loading...</p>
    </div>

    <script src="/static/scripts.js"></script>
</body>
</html>
